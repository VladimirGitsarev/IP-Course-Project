{"ast":null,"code":"var _jsxFileName = \"/home/uladzimir/All/Studies/microblog/microblog/frontend/src/pages/Post.js\";\nimport PropTypes from 'prop-types';\nimport { NavLink } from 'react-router-dom';\nimport ReactDOM from 'react-dom';\nimport React, { Component, Fragment } from 'react';\nimport axiosInstance from '../axios';\nimport Loader from '../Loader';\nimport CommentsList from '../components/CommentsList';\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\nimport { faComment, faThumbsDown as dislikeReg, faThumbsUp as likeReg } from '@fortawesome/free-regular-svg-icons';\nimport { faReply, faThumbsDown as dislikeSol, faThumbsUp as likeSol } from '@fortawesome/free-solid-svg-icons';\nimport AddComment from '../components/AddComment';\n\nclass Post extends Component {\n  constructor(props) {\n    super(props);\n\n    this.btnClick = e => {\n      e.preventDefault();\n      let element = e.target.getAttribute('name');\n\n      switch (element) {\n        case 'like':\n          axiosInstance.post(`http://localhost:8000/api/posts/like/${this.state.post.id}`, {\n            liked: this.state.liked\n          });\n      }\n    };\n\n    this.state = {\n      post: '',\n      comments: '',\n      loading_post: true,\n      loading_comments: true,\n      commenting: false,\n      liked: '',\n      disliked: ''\n    };\n    this.commentClick = this.commentClick.bind(this);\n    this.getComments = this.getComments.bind(this);\n  }\n\n  componentDidMount() {\n    const id = this.props.match.params.id;\n    this.getCurrentUser();\n    this.getPost(id);\n  }\n\n  getCurrentUser() {\n    axiosInstance.get('http://localhost:8000/api/current_user/').then(res => {\n      this.setState({\n        account: res.data\n      });\n    });\n  }\n\n  getPost(id) {\n    axiosInstance.get(`http://localhost:8000/api/posts/${id}`).then(res => {\n      this.setState({\n        post: res.data,\n        loading_post: false\n      });\n      this.getComments(id);\n      this.state.post.likes.forEach(like => {\n        if (like.id == this.state.account.user.id) {\n          this.setState({\n            liked: true\n          });\n          console.log('Current user liked this post');\n        }\n      });\n      this.state.post.dislikes.forEach(dislike => {\n        if (dislike.id == this.state.account.user.id) {\n          this.setState({\n            disliked: true\n          });\n          console.log('Current user disliked this post');\n        }\n      });\n    });\n  }\n\n  getComments(id) {\n    axiosInstance.get(`http://localhost:8000/api/posts/comments/${id}`).then(res => {\n      this.setState({\n        comments: res.data,\n        loading_comments: false,\n        commenting: false\n      });\n      console.log(this.state.comments);\n    });\n  }\n\n  formatDate(str) {\n    let date = new Date(str);\n    return date.getHours() + ':' + (date.getMinutes().length > 1 ? '0' + date.getMinutes() : date.getMinutes()) + ' · ' + date.getFullYear() + '-' + (date.getMonth() + 1) + '-' + date.getDate();\n  }\n\n  getRandomInt(max) {\n    return Math.floor(Math.random() * Math.floor(max));\n  }\n\n  commentClick() {\n    this.setState({\n      commenting: !this.state.commenting\n    });\n    console.log(this.state.commenting);\n  }\n\n  render() {\n    let post = this.state.loading_post ? /*#__PURE__*/React.createElement(Loader, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 107,\n        columnNumber: 46\n      }\n    }) : /*#__PURE__*/React.createElement(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 108,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(\"article\", {\n      className: \"posts-container pt-3 pl-3 pr-3 pb-0\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 109,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"d-flex\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 110,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(\"img\", {\n      className: \"rounded-circle\",\n      src: this.state.post.user.img,\n      height: \"50\",\n      width: \"50\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 111,\n        columnNumber: 21\n      }\n    }), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"ml-2\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 112,\n        columnNumber: 21\n      }\n    }, /*#__PURE__*/React.createElement(\"p\", {\n      className: \"m-0\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 113,\n        columnNumber: 25\n      }\n    }, /*#__PURE__*/React.createElement(\"b\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 113,\n        columnNumber: 44\n      }\n    }, this.state.post.user.user.first_name, \" \", this.state.post.user.user.last_name)), /*#__PURE__*/React.createElement(NavLink, {\n      style: {\n        color: '#5b7083'\n      },\n      to: \"/user/\" + this.state.post.user.user.username,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 114,\n        columnNumber: 25\n      }\n    }, /*#__PURE__*/React.createElement(\"p\", {\n      className: \"m-0\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 114,\n        columnNumber: 110\n      }\n    }, \"@\", this.state.post.user.user.username)))), /*#__PURE__*/React.createElement(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 117,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(\"p\", {\n      style: {\n        fontSize: \"18pt\"\n      },\n      className: \"mt-2 mb-1\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 118,\n        columnNumber: 21\n      }\n    }, this.state.post.body), /*#__PURE__*/React.createElement(\"p\", {\n      className: \"mb-3\",\n      style: {\n        color: '#5b7083',\n        fontSize: \"12pt\"\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 119,\n        columnNumber: 21\n      }\n    }, \" \", this.formatDate(this.state.post.date)), /*#__PURE__*/React.createElement(\"hr\", {\n      className: \"mt-3 mb-3\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 120,\n        columnNumber: 21\n      }\n    }), /*#__PURE__*/React.createElement(\"p\", {\n      className: \"mb-3\",\n      style: {\n        color: \"#5b7083\"\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 121,\n        columnNumber: 21\n      }\n    }, /*#__PURE__*/React.createElement(\"span\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 122,\n        columnNumber: 25\n      }\n    }, /*#__PURE__*/React.createElement(\"b\", {\n      style: {\n        color: \"#212529\"\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 122,\n        columnNumber: 31\n      }\n    }, this.state.post.likes.length), \" likes\"), \"\\xA0|\\xA0\", /*#__PURE__*/React.createElement(\"span\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 124,\n        columnNumber: 25\n      }\n    }, /*#__PURE__*/React.createElement(\"b\", {\n      style: {\n        color: \"#212529\"\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 124,\n        columnNumber: 31\n      }\n    }, this.state.post.dislikes.length), \" dislikes\"), \"\\xA0|\\xA0\", /*#__PURE__*/React.createElement(\"span\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 126,\n        columnNumber: 25\n      }\n    }, /*#__PURE__*/React.createElement(\"b\", {\n      style: {\n        color: \"#212529\"\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 126,\n        columnNumber: 31\n      }\n    }, this.state.comments.length), \" comments\"), \"\\xA0|\\xA0\", /*#__PURE__*/React.createElement(\"span\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 128,\n        columnNumber: 25\n      }\n    }, /*#__PURE__*/React.createElement(\"b\", {\n      style: {\n        color: \"#212529\"\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 128,\n        columnNumber: 31\n      }\n    }, this.getRandomInt(100)), \" reposts\")), /*#__PURE__*/React.createElement(\"hr\", {\n      className: \"mt-3 mb-3\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 130,\n        columnNumber: 21\n      }\n    }), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"d-flex justify-content-around\",\n      style: {\n        color: \"#5b7083\"\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 131,\n        columnNumber: 21\n      }\n    }, /*#__PURE__*/React.createElement(\"p\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 132,\n        columnNumber: 25\n      }\n    }, /*#__PURE__*/React.createElement(\"span\", {\n      onClick: this.btnClick,\n      name: \"like\",\n      className: \"post-icon like-post\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 132,\n        columnNumber: 28\n      }\n    }, /*#__PURE__*/React.createElement(FontAwesomeIcon, {\n      icon: this.state.liked ? likeSol : likeReg,\n      size: \"lg\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 132,\n        columnNumber: 102\n      }\n    }))), /*#__PURE__*/React.createElement(\"p\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 133,\n        columnNumber: 25\n      }\n    }, /*#__PURE__*/React.createElement(\"span\", {\n      onClick: this.btnClick,\n      name: \"dislike\",\n      className: \"post-icon dislike-post\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 133,\n        columnNumber: 28\n      }\n    }, /*#__PURE__*/React.createElement(FontAwesomeIcon, {\n      icon: this.state.disliked ? dislikeSol : dislikeReg,\n      size: \"lg\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 133,\n        columnNumber: 108\n      }\n    }))), /*#__PURE__*/React.createElement(\"p\", {\n      onClick: this.commentClick,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 134,\n        columnNumber: 25\n      }\n    }, /*#__PURE__*/React.createElement(\"span\", {\n      className: \"post-icon repost-post\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 134,\n        columnNumber: 56\n      }\n    }, /*#__PURE__*/React.createElement(FontAwesomeIcon, {\n      icon: faComment,\n      size: \"lg\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 134,\n        columnNumber: 96\n      }\n    }))), /*#__PURE__*/React.createElement(\"p\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 135,\n        columnNumber: 25\n      }\n    }, /*#__PURE__*/React.createElement(\"span\", {\n      className: \"post-icon repost-post\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 135,\n        columnNumber: 28\n      }\n    }, /*#__PURE__*/React.createElement(FontAwesomeIcon, {\n      icon: faReply,\n      size: \"lg\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 135,\n        columnNumber: 68\n      }\n    })))))), this.state.commenting && /*#__PURE__*/React.createElement(AddComment, {\n      post: this.state.post,\n      getComments: this.getComments,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 139,\n        columnNumber: 39\n      }\n    }));\n    let comments = this.state.loading_comments ? /*#__PURE__*/React.createElement(Loader, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 141,\n        columnNumber: 54\n      }\n    }) : /*#__PURE__*/React.createElement(CommentsList, {\n      comments: this.state.comments,\n      post: this.state.post,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 141,\n        columnNumber: 67\n      }\n    });\n    return /*#__PURE__*/React.createElement(Fragment, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 143,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"container\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 144,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"row justify-content-center\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 145,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"col-md-10 col-lg-7\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 146,\n        columnNumber: 21\n      }\n    }, /*#__PURE__*/React.createElement(\"h5\", {\n      className: \"header\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 147,\n        columnNumber: 25\n      }\n    }, \"Post\"), post, comments))));\n  }\n\n}\n\nexport default Post;","map":{"version":3,"sources":["/home/uladzimir/All/Studies/microblog/microblog/frontend/src/pages/Post.js"],"names":["PropTypes","NavLink","ReactDOM","React","Component","Fragment","axiosInstance","Loader","CommentsList","FontAwesomeIcon","faComment","faThumbsDown","dislikeReg","faThumbsUp","likeReg","faReply","dislikeSol","likeSol","AddComment","Post","constructor","props","btnClick","e","preventDefault","element","target","getAttribute","post","state","id","liked","comments","loading_post","loading_comments","commenting","disliked","commentClick","bind","getComments","componentDidMount","match","params","getCurrentUser","getPost","get","then","res","setState","account","data","likes","forEach","like","user","console","log","dislikes","dislike","formatDate","str","date","Date","getHours","getMinutes","length","getFullYear","getMonth","getDate","getRandomInt","max","Math","floor","random","render","img","first_name","last_name","color","username","fontSize","body"],"mappings":"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","sourcesContent":["import PropTypes from 'prop-types';\nimport { NavLink } from 'react-router-dom';\nimport ReactDOM from 'react-dom'\nimport React, { Component, Fragment } from 'react';\nimport axiosInstance from '../axios';\nimport Loader from '../Loader'\nimport CommentsList from '../components/CommentsList'\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome'\nimport { faComment, faThumbsDown as dislikeReg, faThumbsUp as likeReg} from '@fortawesome/free-regular-svg-icons'\nimport { faReply, faThumbsDown as dislikeSol, faThumbsUp as likeSol} from '@fortawesome/free-solid-svg-icons';\nimport AddComment from '../components/AddComment'\n\n\nclass Post extends Component {\n    constructor(props) {\n        super(props);\n        this.state = {\n            post: '',\n            comments: '',\n            loading_post: true,\n            loading_comments: true,\n            commenting: false,\n            liked: '',\n            disliked: ''\n        };\n        this.commentClick = this.commentClick.bind(this)\n        this.getComments = this.getComments.bind(this)\n    }\n\n    componentDidMount(){        \n        const id = this.props.match.params.id;\n        this.getCurrentUser();\n        this.getPost(id);\n    }\n\n    getCurrentUser(){\n        axiosInstance\n            .get('http://localhost:8000/api/current_user/')\n            .then(res => {\n                this.setState({\n                account: res.data\n                });\n            });\n        }\n\n    getPost(id){\n        axiosInstance.get(`http://localhost:8000/api/posts/${id}`)\n        .then(res => {\n            this.setState({\n                post: res.data,\n                loading_post: false,\n            });\n            this.getComments(id);\n            this.state.post.likes.forEach(like => {\n                if (like.id == this.state.account.user.id){\n                    this.setState({liked: true})\n                    console.log('Current user liked this post')\n                }\n            })\n            this.state.post.dislikes.forEach(dislike => {\n                if (dislike.id == this.state.account.user.id){\n                    this.setState({disliked: true})\n                    console.log('Current user disliked this post')\n                }\n            })\n        })\n    }\n\n    getComments(id){\n        axiosInstance.get(`http://localhost:8000/api/posts/comments/${id}`)\n        .then(res => {\n            this.setState({\n                comments: res.data,\n                loading_comments: false,\n                commenting: false\n            });\n            console.log(this.state.comments)\n        })\n    }\n\n    btnClick = e => {\n        e.preventDefault();\n        let element = e.target.getAttribute('name');\n        switch(element){\n            case 'like':\n                axiosInstance.post(`http://localhost:8000/api/posts/like/${this.state.post.id}`, {\n                    liked: this.state.liked\n                  })\n        }\n    }\n    formatDate(str){\n        let date = new Date(str);\n        return date.getHours() + ':' + (date.getMinutes().length > 1 ? '0' + date.getMinutes() : date.getMinutes()) + ' · ' + \n               date.getFullYear()+ '-' + (date.getMonth()+1) + '-' + date.getDate();   \n    }\n\n    getRandomInt(max) {\n        return Math.floor(Math.random() * Math.floor(max));\n    }\n    \n    commentClick(){\n        this.setState({commenting: !this.state.commenting});\n        console.log(this.state.commenting)\n    }\n\n    render(){\n        let post = this.state.loading_post ? <Loader /> : \n            <div>\n            <article className=\"posts-container pt-3 pl-3 pr-3 pb-0\">\n                <div className=\"d-flex\">\n                    <img className=\"rounded-circle\" src={this.state.post.user.img} height=\"50\" width=\"50\"></img>\n                    <div className=\"ml-2\">\n                        <p className=\"m-0\"><b>{this.state.post.user.user.first_name} {this.state.post.user.user.last_name}</b></p>\n                        <NavLink style={{color:'#5b7083'}}  to={\"/user/\"+this.state.post.user.user.username}><p className=\"m-0\">@{this.state.post.user.user.username}</p></NavLink>\n                    </div>\n                </div>\n                <div>\n                    <p style={{fontSize: \"18pt\"}} className=\"mt-2 mb-1\" >{this.state.post.body}</p>\n                    <p className=\"mb-3\" style={{color:'#5b7083', fontSize: \"12pt\"}}> {this.formatDate(this.state.post.date)}</p>\n                    <hr className=\"mt-3 mb-3\"/>\n                    <p className=\"mb-3\" style={{color: \"#5b7083\"}}> \n                        <span><b style={{color: \"#212529\"}}>{this.state.post.likes.length}</b> likes</span> \n                        &nbsp;|&nbsp;\n                        <span><b style={{color: \"#212529\"}}>{this.state.post.dislikes.length}</b> dislikes</span>\n                        &nbsp;|&nbsp;\n                        <span><b style={{color: \"#212529\"}}>{this.state.comments.length}</b> comments</span>\n                        &nbsp;|&nbsp;\n                        <span><b style={{color: \"#212529\"}}>{this.getRandomInt(100)}</b> reposts</span>\n                    </p>\n                    <hr className=\"mt-3 mb-3\"/>\n                    <div className='d-flex justify-content-around' style={{color: \"#5b7083\"}}>\n                        <p><span onClick={this.btnClick} name=\"like\" className=\"post-icon like-post\"><FontAwesomeIcon icon={this.state.liked ? likeSol : likeReg} size=\"lg\"/></span></p>\n                        <p><span onClick={this.btnClick} name=\"dislike\" className=\"post-icon dislike-post\"><FontAwesomeIcon icon={this.state.disliked ? dislikeSol : dislikeReg} size=\"lg\"/></span></p>\n                        <p onClick={this.commentClick}><span className=\"post-icon repost-post\"><FontAwesomeIcon icon={faComment} size=\"lg\"/></span></p>\n                        <p><span className=\"post-icon repost-post\"><FontAwesomeIcon icon={faReply} size=\"lg\"/></span></p>\n                    </div>\n                </div>\n            </article>\n            {this.state.commenting && <AddComment post={this.state.post} getComments={this.getComments}/>}\n            </div>\n        let comments = this.state.loading_comments ? <Loader /> : <CommentsList comments={this.state.comments} post={this.state.post} ></CommentsList>\n        return(\n        <Fragment>\n            <div className=\"container\">\n                <div className=\"row justify-content-center\">\n                    <div className=\"col-md-10 col-lg-7\">\n                        <h5 className=\"header\">Post</h5>\n                        {post}\n                        {comments}\n                    </div>\n                </div>\n            </div>\n        </Fragment>\n    )\n  }\n}\n\nexport default Post"]},"metadata":{},"sourceType":"module"}