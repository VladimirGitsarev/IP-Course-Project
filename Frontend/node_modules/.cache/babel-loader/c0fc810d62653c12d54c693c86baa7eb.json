{"ast":null,"code":"var _jsxFileName = \"/home/uladzimir/All/Studies/microblog/microblog/frontend/src/pages/Login.js\";\nimport PropTypes from 'prop-types';\nimport { NavLink } from 'react-router-dom';\nimport ReactDOM from 'react-dom';\nimport React, { Component } from 'react';\nimport axiosInstance from '../axios';\n\nclass LoginForm extends Component {\n  constructor(...args) {\n    super(...args);\n    this.state = {\n      username: '',\n      password: '',\n      error: ''\n    };\n\n    this.handle_change = e => {\n      this.setState({\n        error: ''\n      });\n      const name = e.target.name;\n      const value = e.target.value;\n      this.setState(prevstate => {\n        const newState = { ...prevstate\n        };\n        newState[name] = value;\n        return newState;\n      });\n    };\n\n    this.handle_login = (e, data) => {\n      e.preventDefault();\n      axiosInstance.post(`token-auth/`, {\n        username: data.username,\n        password: data.password\n      }).then(res => {\n        localStorage.setItem('access_token', res.data.access);\n        localStorage.setItem('refresh_token', res.data.refresh);\n        axiosInstance.defaults.headers['Authorization'] = 'JWT ' + localStorage.getItem('access_token');\n        this.props.updateState(true);\n        this.props.history.push('/');\n      }).catch(err => {\n        if (err.response.status === 401) {\n          this.setState({\n            error: \"Invalid username or password!\"\n          });\n        }\n      });\n    };\n  }\n\n  render() {\n    return /*#__PURE__*/React.createElement(\"div\", {\n      className: \"container\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 53,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"row justify-content-center mt-5\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 54,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(\"h2\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 55,\n        columnNumber: 15\n      }\n    }, \"Welcome to \", /*#__PURE__*/React.createElement(\"strong\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 55,\n        columnNumber: 30\n      }\n    }, \"Microblog!\"))), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"row justify-content-center mt-3\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 57,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(\"h3\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 58,\n        columnNumber: 15\n      }\n    }, \"Sign In\")), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"row justify-content-center\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 60,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(\"form\", {\n      className: \"col-8 col-lg-4 col-md-6 col-sm-8\",\n      onSubmit: e => this.handle_login(e, this.state),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 61,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"form-group\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 62,\n        columnNumber: 21\n      }\n    }, /*#__PURE__*/React.createElement(\"label\", {\n      htmlFor: \"exampleInputEmail1\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 63,\n        columnNumber: 25\n      }\n    }, \"Username\"), /*#__PURE__*/React.createElement(\"input\", {\n      onChange: this.handle_change,\n      type: \"text\",\n      className: \"form-control\",\n      id: \"username\",\n      name: \"username\",\n      \"aria-describedby\": \"usernameHelp\",\n      placeholder: \"Enter username\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 64,\n        columnNumber: 25\n      }\n    })), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"form-group\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 66,\n        columnNumber: 21\n      }\n    }, /*#__PURE__*/React.createElement(\"label\", {\n      htmlFor: \"exampleInputPassword1\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 67,\n        columnNumber: 25\n      }\n    }, \"Password\"), /*#__PURE__*/React.createElement(\"input\", {\n      onChange: this.handle_change,\n      type: \"password\",\n      className: \"form-control\",\n      id: \"password\",\n      name: \"password\",\n      placeholder: \"Password\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 68,\n        columnNumber: 25\n      }\n    })), /*#__PURE__*/React.createElement(\"button\", {\n      type: \"submit\",\n      className: \"def-btn btn-normal btn-block\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 70,\n        columnNumber: 21\n      }\n    }, \"Sign In\"))), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"row justify-content-center mt-3\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 73,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(\"p\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 74,\n        columnNumber: 15\n      }\n    }, \"Please, log in or \", /*#__PURE__*/React.createElement(\"i\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 74,\n        columnNumber: 36\n      }\n    }, /*#__PURE__*/React.createElement(NavLink, {\n      to: \"/register\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 74,\n        columnNumber: 39\n      }\n    }, \"create an account!\")))), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"row justify-content-center mt-3\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 76,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(\"p\", {\n      style: {\n        color: '#d53d3dd0'\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 77,\n        columnNumber: 15\n      }\n    }, /*#__PURE__*/React.createElement(\"b\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 77,\n        columnNumber: 48\n      }\n    }, this.state.error))));\n  }\n\n}\n\nexport default LoginForm; // LoginForm.propTypes = {\n//   handle_login: PropTypes.func.isRequired\n// };","map":{"version":3,"sources":["/home/uladzimir/All/Studies/microblog/microblog/frontend/src/pages/Login.js"],"names":["PropTypes","NavLink","ReactDOM","React","Component","axiosInstance","LoginForm","state","username","password","error","handle_change","e","setState","name","target","value","prevstate","newState","handle_login","data","preventDefault","post","then","res","localStorage","setItem","access","refresh","defaults","headers","getItem","props","updateState","history","push","catch","err","response","status","render","color"],"mappings":"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","sourcesContent":["\nimport PropTypes from 'prop-types';\nimport { NavLink } from 'react-router-dom';\nimport ReactDOM from 'react-dom'\nimport React, { Component} from 'react';\nimport axiosInstance from '../axios';\n\nclass LoginForm extends Component {\n  state = {\n    username: '',\n    password: '',\n    error: ''\n  };\n\n  handle_change = e => {\n    this.setState({error: ''});\n    const name = e.target.name;\n    const value = e.target.value;\n    this.setState(prevstate => {\n      const newState = { ...prevstate };\n      newState[name] = value;\n      return newState;\n    });\n  };\n\n  handle_login = (e, data) => {\n    e.preventDefault();\n    axiosInstance\n\t\t\t.post(`token-auth/`, {\n\t\t\t\tusername: data.username,\n        password: data.password,\n\t\t\t})\n      .then(res => {\n          localStorage.setItem('access_token', res.data.access);\n          localStorage.setItem('refresh_token', res.data.refresh);\n          axiosInstance.defaults.headers['Authorization'] =\n          'JWT ' + localStorage.getItem('access_token');\n          this.props.updateState(true)\n          this.props.history.push('/')\n      })\n      .catch(err => { \n        if (err.response.status === 401) { \n          this.setState({\n            error: \"Invalid username or password!\",\n          })\n        }\n      })\n\n  };\n\n  render() {\n    return (\n        <div className=\"container\">\n            <div className=\"row justify-content-center mt-5\">\n              <h2>Welcome to <strong>Microblog!</strong></h2>\n            </div>\n            <div className=\"row justify-content-center mt-3\">\n              <h3>Sign In</h3>\n            </div>\n            <div className=\"row justify-content-center\">\n                <form className=\"col-8 col-lg-4 col-md-6 col-sm-8\" onSubmit={e => this.handle_login(e, this.state)}>\n                    <div className=\"form-group\">\n                        <label htmlFor=\"exampleInputEmail1\">Username</label>\n                        <input onChange={this.handle_change} type=\"text\" className=\"form-control\" id=\"username\" name=\"username\" aria-describedby=\"usernameHelp\" placeholder=\"Enter username\" />\n                    </div>\n                    <div className=\"form-group\">\n                        <label htmlFor=\"exampleInputPassword1\">Password</label>\n                        <input onChange={this.handle_change} type=\"password\" className=\"form-control\" id=\"password\" name=\"password\" placeholder=\"Password\" />\n                    </div>\n                    <button type=\"submit\" className=\"def-btn btn-normal btn-block\">Sign In</button>\n                </form>\n            </div>\n            <div className=\"row justify-content-center mt-3\">\n              <p>Please, log in or <i><NavLink to={\"/register\"}>create an account!</NavLink></i></p>\n            </div>\n            <div className=\"row justify-content-center mt-3\">\n              <p style={{ color: '#d53d3dd0'}}><b>{this.state.error}</b></p>\n            </div>\n        </div>\n    );\n  }\n}\n\nexport default LoginForm;\n\n// LoginForm.propTypes = {\n//   handle_login: PropTypes.func.isRequired\n// };"]},"metadata":{},"sourceType":"module"}