{"ast":null,"code":"var _jsxFileName = \"/home/uladzimir/All/Studies/microblog/microblog/frontend/src/pages/Post.js\";\nimport PropTypes from 'prop-types';\nimport { NavLink } from 'react-router-dom';\nimport ReactDOM from 'react-dom';\nimport React, { Component, Fragment } from 'react';\nimport axiosInstance from '../axios';\nimport Loader from '../Loader';\nimport CommentsList from '../components/CommentsList';\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\nimport { faComment as commentReg, faThumbsDown as dislikeReg, faThumbsUp as likeReg } from '@fortawesome/free-regular-svg-icons';\nimport { faReply, faComment as commentSol, faThumbsDown as dislikeSol, faThumbsUp as likeSol, faCross } from '@fortawesome/free-solid-svg-icons';\nimport AddComment from '../components/AddComment';\n\nclass Post extends Component {\n  constructor(props) {\n    super(props);\n\n    this.btnClick = e => {\n      e.preventDefault();\n      let element = e.target.getAttribute('name');\n      console.log(element);\n\n      switch (element) {\n        case 'like':\n          axiosInstance.post(`http://localhost:8000/api/posts/like/${this.state.post.id}`, {\n            liked: this.state.liked\n          }).then(response => this.setState({\n            liked: !this.state.liked,\n            post: response.data,\n            disliked: false\n          }));\n          break;\n\n        case 'dislike':\n          axiosInstance.post(`http://localhost:8000/api/posts/dislike/${this.state.post.id}`, {\n            disliked: this.state.disliked\n          }).then(response => this.setState({\n            disliked: !this.state.disliked,\n            post: response.data,\n            liked: false\n          }));\n          break;\n      }\n    };\n\n    this.postClick = e => {\n      e.preventDefault();\n      this.getPost(this.state.post.repost.id);\n    };\n\n    this.state = {\n      post: '',\n      comments: '',\n      loading_post: true,\n      loading_comments: true,\n      commenting: false,\n      liked: '',\n      disliked: ''\n    };\n    this.commentClick = this.commentClick.bind(this);\n    this.getComments = this.getComments.bind(this);\n    this.btnClick = this.btnClick.bind(this);\n  }\n\n  componentDidMount() {\n    const id = this.props.match.params.id;\n    this.getCurrentUser();\n    this.getPost(id);\n  }\n\n  getCurrentUser() {\n    axiosInstance.get('http://localhost:8000/api/current_user/').then(res => {\n      this.setState({\n        account: res.data\n      });\n    });\n  }\n\n  getPost(id) {\n    axiosInstance.get(`http://localhost:8000/api/posts/${id}`).then(res => {\n      this.setState({\n        post: res.data,\n        loading_post: false\n      });\n      this.getComments(id);\n      this.state.post.likes.forEach(like => {\n        if (like.id == this.state.account.user.id) {\n          this.setState({\n            liked: true\n          });\n          console.log('Current user liked this post');\n        }\n      });\n      this.state.post.dislikes.forEach(dislike => {\n        if (dislike.id == this.state.account.user.id) {\n          this.setState({\n            disliked: true\n          });\n          console.log('Current user disliked this post');\n        }\n      });\n    });\n  }\n\n  getComments(id) {\n    axiosInstance.get(`http://localhost:8000/api/posts/comments/${id}`).then(res => {\n      this.setState({\n        comments: res.data,\n        loading_comments: false,\n        commenting: false\n      });\n      const comment = this.props.match.params.comment;\n\n      if (comment) {\n        this.setState({\n          commenting: true\n        });\n      }\n    });\n  }\n\n  formatDate(str) {\n    let date = new Date(str);\n    return date.getHours() + ':' + (date.getMinutes().length > 1 ? '0' + date.getMinutes() : date.getMinutes()) + ' · ' + date.getFullYear() + '-' + (date.getMonth() + 1) + '-' + date.getDate();\n  }\n\n  getRandomInt(max) {\n    return Math.floor(Math.random() * Math.floor(max));\n  }\n\n  commentClick() {\n    this.setState({\n      commenting: !this.state.commenting\n    });\n    console.log(this.state.commenting);\n  }\n\n  render() {\n    let repost = '';\n\n    if (this.state.post.repost) {\n      repost = /*#__PURE__*/React.createElement(NavLink, {\n        onClick: this.postClick,\n        style: {\n          textDecoration: \"none\",\n          color: \"inherit\"\n        },\n        to: \"/post/\" + this.state.post.repost.id,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 139,\n          columnNumber: 13\n        }\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        className: \"repost pt-2 pb-2\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 140,\n          columnNumber: 17\n        }\n      }, /*#__PURE__*/React.createElement(\"p\", {\n        style: {\n          fontSize: '14pt'\n        },\n        className: \"mb-1\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 141,\n          columnNumber: 17\n        }\n      }, /*#__PURE__*/React.createElement(FontAwesomeIcon, {\n        style: {\n          color: \"#5b7083\"\n        },\n        name: \"repost\",\n        icon: faReply,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 142,\n          columnNumber: 21\n        }\n      }), \" Repost from\\xA0\"), /*#__PURE__*/React.createElement(\"div\", {\n        className: \"d-flex mb-1\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 144,\n          columnNumber: 21\n        }\n      }, /*#__PURE__*/React.createElement(\"img\", {\n        className: \"rounded-circle\",\n        src: this.state.post.repost.user.img,\n        height: \"50\",\n        width: \"50\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 145,\n          columnNumber: 25\n        }\n      }), /*#__PURE__*/React.createElement(\"div\", {\n        className: \"ml-2\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 146,\n          columnNumber: 25\n        }\n      }, /*#__PURE__*/React.createElement(\"p\", {\n        className: \"m-0\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 147,\n          columnNumber: 29\n        }\n      }, /*#__PURE__*/React.createElement(\"b\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 147,\n          columnNumber: 48\n        }\n      }, this.state.post.repost.user.user.first_name, \" \", this.state.post.repost.user.user.last_name)), /*#__PURE__*/React.createElement(NavLink, {\n        style: {\n          color: '#5b7083'\n        },\n        to: \"/user/\" + this.state.post.repost.user.user.username,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 148,\n          columnNumber: 29\n        }\n      }, /*#__PURE__*/React.createElement(\"p\", {\n        className: \"m-0\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 148,\n          columnNumber: 121\n        }\n      }, \"@\", this.state.post.repost.user.user.username)))), /*#__PURE__*/React.createElement(\"p\", {\n        style: {\n          fontSize: \"14pt\"\n        },\n        className: \"m-0\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 151,\n          columnNumber: 21\n        }\n      }, this.state.post.repost.body)));\n    }\n\n    let post = this.state.loading_post ? /*#__PURE__*/React.createElement(Loader, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 155,\n        columnNumber: 46\n      }\n    }) : /*#__PURE__*/React.createElement(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 156,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(\"article\", {\n      className: \"home-container pt-3 pl-3 pr-3 pb-0\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 157,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"d-flex\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 158,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(\"img\", {\n      className: \"rounded-circle\",\n      src: this.state.post.user.img,\n      height: \"50\",\n      width: \"50\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 159,\n        columnNumber: 21\n      }\n    }), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"ml-2\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 160,\n        columnNumber: 21\n      }\n    }, /*#__PURE__*/React.createElement(\"p\", {\n      className: \"m-0\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 161,\n        columnNumber: 25\n      }\n    }, /*#__PURE__*/React.createElement(\"b\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 161,\n        columnNumber: 44\n      }\n    }, this.state.post.user.user.first_name, \" \", this.state.post.user.user.last_name)), /*#__PURE__*/React.createElement(NavLink, {\n      style: {\n        color: '#5b7083'\n      },\n      to: \"/user/\" + this.state.post.user.user.username,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 162,\n        columnNumber: 25\n      }\n    }, /*#__PURE__*/React.createElement(\"p\", {\n      className: \"m-0\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 162,\n        columnNumber: 110\n      }\n    }, \"@\", this.state.post.user.user.username))), /*#__PURE__*/React.createElement(FontAwesomeIcon, {\n      icon: faCross,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 164,\n        columnNumber: 21\n      }\n    })), /*#__PURE__*/React.createElement(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 166,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(\"p\", {\n      style: {\n        fontSize: \"18pt\"\n      },\n      className: \"mt-2 mb-1\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 167,\n        columnNumber: 21\n      }\n    }, this.state.post.body), repost, /*#__PURE__*/React.createElement(\"p\", {\n      className: \"mb-3\",\n      style: {\n        color: '#5b7083',\n        fontSize: \"12pt\"\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 169,\n        columnNumber: 21\n      }\n    }, \" \", this.formatDate(this.state.post.date)), /*#__PURE__*/React.createElement(\"hr\", {\n      className: \"mt-3 mb-3\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 170,\n        columnNumber: 21\n      }\n    }), /*#__PURE__*/React.createElement(\"p\", {\n      className: \"mb-3\",\n      style: {\n        color: \"#5b7083\"\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 171,\n        columnNumber: 21\n      }\n    }, /*#__PURE__*/React.createElement(\"span\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 172,\n        columnNumber: 25\n      }\n    }, /*#__PURE__*/React.createElement(\"b\", {\n      style: {\n        color: \"#212529\"\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 172,\n        columnNumber: 31\n      }\n    }, this.state.post.likes.length), \" likes\"), \"\\xA0|\\xA0\", /*#__PURE__*/React.createElement(\"span\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 174,\n        columnNumber: 25\n      }\n    }, /*#__PURE__*/React.createElement(\"b\", {\n      style: {\n        color: \"#212529\"\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 174,\n        columnNumber: 31\n      }\n    }, this.state.post.dislikes.length), \" dislikes\"), \"\\xA0|\\xA0\", /*#__PURE__*/React.createElement(\"span\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 176,\n        columnNumber: 25\n      }\n    }, /*#__PURE__*/React.createElement(\"b\", {\n      style: {\n        color: \"#212529\"\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 176,\n        columnNumber: 31\n      }\n    }, this.state.comments.length), \" comments\"), \"\\xA0|\\xA0\", /*#__PURE__*/React.createElement(\"span\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 178,\n        columnNumber: 25\n      }\n    }, /*#__PURE__*/React.createElement(\"b\", {\n      style: {\n        color: \"#212529\"\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 178,\n        columnNumber: 31\n      }\n    }, this.state.post.reposts_count), \" reposts\")), /*#__PURE__*/React.createElement(\"hr\", {\n      className: \"mt-3 mb-3\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 180,\n        columnNumber: 21\n      }\n    }), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"d-flex justify-content-around\",\n      style: {\n        color: \"#5b7083\"\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 181,\n        columnNumber: 21\n      }\n    }, /*#__PURE__*/React.createElement(\"p\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 182,\n        columnNumber: 25\n      }\n    }, /*#__PURE__*/React.createElement(\"span\", {\n      name: \"like\",\n      onClick: this.btnClick,\n      className: \"post-icon like-post\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 183,\n        columnNumber: 29\n      }\n    }, this.state.liked ? /*#__PURE__*/React.createElement(FontAwesomeIcon, {\n      style: {\n        color: \"#17bf63\"\n      },\n      icon: likeSol,\n      size: \"lg\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 184,\n        columnNumber: 53\n      }\n    }) : /*#__PURE__*/React.createElement(FontAwesomeIcon, {\n      icon: likeReg,\n      size: \"lg\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 184,\n        columnNumber: 126\n      }\n    }))), /*#__PURE__*/React.createElement(\"p\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 187,\n        columnNumber: 25\n      }\n    }, /*#__PURE__*/React.createElement(\"span\", {\n      name: \"dislike\",\n      onClick: this.btnClick,\n      className: \"post-icon dislike-post\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 188,\n        columnNumber: 29\n      }\n    }, this.state.disliked ? /*#__PURE__*/React.createElement(FontAwesomeIcon, {\n      style: {\n        color: \"#e0245e\"\n      },\n      icon: dislikeSol,\n      size: \"lg\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 189,\n        columnNumber: 56\n      }\n    }) : /*#__PURE__*/React.createElement(FontAwesomeIcon, {\n      icon: dislikeReg,\n      size: \"lg\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 189,\n        columnNumber: 132\n      }\n    }))), /*#__PURE__*/React.createElement(\"p\", {\n      onClick: this.commentClick,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 193,\n        columnNumber: 25\n      }\n    }, /*#__PURE__*/React.createElement(\"span\", {\n      className: \"post-icon repost-post\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 193,\n        columnNumber: 56\n      }\n    }, /*#__PURE__*/React.createElement(FontAwesomeIcon, {\n      icon: this.state.commenting ? commentSol : commentReg,\n      size: \"lg\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 193,\n        columnNumber: 96\n      }\n    }))), /*#__PURE__*/React.createElement(\"p\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 194,\n        columnNumber: 25\n      }\n    }, \" \", /*#__PURE__*/React.createElement(NavLink, {\n      style: {\n        textDecoration: \"none\",\n        color: \"inherit\"\n      },\n      to: \"/repost/\" + this.state.post.id,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 194,\n        columnNumber: 29\n      }\n    }, \" \", /*#__PURE__*/React.createElement(\"span\", {\n      className: \"post-icon repost-post\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 194,\n        columnNumber: 125\n      }\n    }, /*#__PURE__*/React.createElement(FontAwesomeIcon, {\n      icon: faReply,\n      size: \"lg\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 194,\n        columnNumber: 165\n      }\n    }))))))), this.state.commenting && /*#__PURE__*/React.createElement(AddComment, {\n      focus: this.state.commenting,\n      post: this.state.post,\n      getComments: this.getComments,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 198,\n        columnNumber: 39\n      }\n    }));\n    let comments = this.state.loading_comments ? /*#__PURE__*/React.createElement(Loader, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 200,\n        columnNumber: 54\n      }\n    }) : /*#__PURE__*/React.createElement(CommentsList, {\n      comments: this.state.comments,\n      post: this.state.post,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 200,\n        columnNumber: 67\n      }\n    });\n    return /*#__PURE__*/React.createElement(Fragment, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 202,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"container\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 203,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"row justify-content-center\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 204,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"col-md-10 col-lg-7\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 205,\n        columnNumber: 21\n      }\n    }, /*#__PURE__*/React.createElement(\"h5\", {\n      className: \"header\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 206,\n        columnNumber: 25\n      }\n    }, \"Post\"), post, comments))));\n  }\n\n}\n\nexport default Post;","map":{"version":3,"sources":["/home/uladzimir/All/Studies/microblog/microblog/frontend/src/pages/Post.js"],"names":["PropTypes","NavLink","ReactDOM","React","Component","Fragment","axiosInstance","Loader","CommentsList","FontAwesomeIcon","faComment","commentReg","faThumbsDown","dislikeReg","faThumbsUp","likeReg","faReply","commentSol","dislikeSol","likeSol","faCross","AddComment","Post","constructor","props","btnClick","e","preventDefault","element","target","getAttribute","console","log","post","state","id","liked","then","response","setState","data","disliked","postClick","getPost","repost","comments","loading_post","loading_comments","commenting","commentClick","bind","getComments","componentDidMount","match","params","getCurrentUser","get","res","account","likes","forEach","like","user","dislikes","dislike","comment","formatDate","str","date","Date","getHours","getMinutes","length","getFullYear","getMonth","getDate","getRandomInt","max","Math","floor","random","render","textDecoration","color","fontSize","img","first_name","last_name","username","body","reposts_count"],"mappings":"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","sourcesContent":["import PropTypes from 'prop-types';\nimport { NavLink } from 'react-router-dom';\nimport ReactDOM from 'react-dom'\nimport React, { Component, Fragment } from 'react';\nimport axiosInstance from '../axios';\nimport Loader from '../Loader'\nimport CommentsList from '../components/CommentsList'\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome'\nimport { faComment as commentReg, faThumbsDown as dislikeReg, faThumbsUp as likeReg} from '@fortawesome/free-regular-svg-icons'\nimport { faReply, faComment as commentSol, faThumbsDown as dislikeSol, faThumbsUp as likeSol, faCross} from '@fortawesome/free-solid-svg-icons';\nimport AddComment from '../components/AddComment'\n\n\nclass Post extends Component {\n    constructor(props) {\n        super(props);\n        this.state = {\n            post: '',\n            comments: '',\n            loading_post: true,\n            loading_comments: true,\n            commenting: false,\n            liked: '',\n            disliked: ''\n        };\n        this.commentClick = this.commentClick.bind(this)\n        this.getComments = this.getComments.bind(this)\n        this.btnClick = this.btnClick.bind(this)\n    }\n\n    componentDidMount(){        \n        const id = this.props.match.params.id;\n        this.getCurrentUser();\n        this.getPost(id);\n    }\n\n    getCurrentUser(){\n        axiosInstance\n            .get('http://localhost:8000/api/current_user/')\n            .then(res => {\n                this.setState({\n                account: res.data\n                });\n            });\n        }\n\n    getPost(id){\n        axiosInstance.get(`http://localhost:8000/api/posts/${id}`)\n        .then(res => {\n            this.setState({\n                post: res.data,\n                loading_post: false,\n            });\n            this.getComments(id);\n            this.state.post.likes.forEach(like => {\n                if (like.id == this.state.account.user.id){\n                    this.setState({liked: true})\n                    console.log('Current user liked this post')\n                }\n            })\n            this.state.post.dislikes.forEach(dislike => {\n                if (dislike.id == this.state.account.user.id){\n                    this.setState({disliked: true})\n                    console.log('Current user disliked this post')\n                }\n            })\n        })\n    }\n\n    getComments(id){\n        axiosInstance.get(`http://localhost:8000/api/posts/comments/${id}`)\n        .then(res => {\n            this.setState({\n                comments: res.data,\n                loading_comments: false,\n                commenting: false\n            });\n            const comment = this.props.match.params.comment;\n            if (comment){\n                this.setState({\n                    commenting: true,\n                })\n            }\n                \n        })\n    }\n\n    btnClick = e => {\n        e.preventDefault();\n        let element = e.target.getAttribute('name');\n        console.log(element)\n        switch(element){\n            case 'like':\n                axiosInstance.post(`http://localhost:8000/api/posts/like/${this.state.post.id}`, {\n                    liked: this.state.liked\n                })\n                .then(response => this.setState({\n                    liked: !this.state.liked,\n                    post: response.data,\n                    disliked: false\n                }))  \n                break;\n            case 'dislike':\n                axiosInstance.post(`http://localhost:8000/api/posts/dislike/${this.state.post.id}`, {\n                    disliked: this.state.disliked\n                })\n                .then(response => this.setState({\n                    disliked: !this.state.disliked,\n                    post: response.data,\n                    liked: false\n                }))\n                break;\n        }\n    }\n    formatDate(str){\n        let date = new Date(str);\n        return date.getHours() + ':' + (date.getMinutes().length > 1 ? '0' + date.getMinutes() : date.getMinutes()) + ' · ' + \n               date.getFullYear()+ '-' + (date.getMonth()+1) + '-' + date.getDate();   \n    }\n\n    getRandomInt(max) {\n        return Math.floor(Math.random() * Math.floor(max));\n    }\n    \n    commentClick(){\n        this.setState({commenting: !this.state.commenting});\n        console.log(this.state.commenting)\n    }\n\n    postClick = e =>{\n        e.preventDefault();\n        this.getPost(this.state.post.repost.id);\n    }\n\n    render(){\n        let repost = ''\n        if (this.state.post.repost){\n            repost = \n            <NavLink onClick={this.postClick} style={{textDecoration: \"none\", color: \"inherit\"}} to={\"/post/\" + this.state.post.repost.id}> \n                <div className=\"repost pt-2 pb-2\">\n                <p style={{fontSize: '14pt'}} className=\"mb-1\"> \n                    <FontAwesomeIcon style={{ color:\"#5b7083\"}} name=\"repost\" icon={faReply}/> Repost from&nbsp;\n                </p>\n                    <div className=\"d-flex mb-1\">\n                        <img className=\"rounded-circle\" src={this.state.post.repost.user.img} height=\"50\" width=\"50\"></img>\n                        <div className=\"ml-2\">\n                            <p className=\"m-0\"><b>{this.state.post.repost.user.user.first_name} {this.state.post.repost.user.user.last_name}</b></p>\n                            <NavLink style={{color:'#5b7083'}}  to={\"/user/\"+this.state.post.repost.user.user.username}><p className=\"m-0\">@{this.state.post.repost.user.user.username}</p></NavLink>\n                        </div>\n                    </div>\n                    <p style={{fontSize: \"14pt\"}} className=\"m-0\">{this.state.post.repost.body}</p>\n                </div>\n            </NavLink>\n        }\n        let post = this.state.loading_post ? <Loader /> : \n            <div>\n            <article className=\"home-container pt-3 pl-3 pr-3 pb-0\">\n                <div className=\"d-flex\">\n                    <img className=\"rounded-circle\" src={this.state.post.user.img} height=\"50\" width=\"50\"></img>\n                    <div className=\"ml-2\">\n                        <p className=\"m-0\"><b>{this.state.post.user.user.first_name} {this.state.post.user.user.last_name}</b></p>\n                        <NavLink style={{color:'#5b7083'}}  to={\"/user/\"+this.state.post.user.user.username}><p className=\"m-0\">@{this.state.post.user.user.username}</p></NavLink>\n                    </div>\n                    <FontAwesomeIcon icon={faCross} />\n                </div>\n                <div>\n                    <p style={{fontSize: \"18pt\"}} className=\"mt-2 mb-1\" >{this.state.post.body}</p>\n                    {repost}\n                    <p className=\"mb-3\" style={{color:'#5b7083', fontSize: \"12pt\"}}> {this.formatDate(this.state.post.date)}</p>\n                    <hr className=\"mt-3 mb-3\"/>\n                    <p className=\"mb-3\" style={{color: \"#5b7083\"}}> \n                        <span><b style={{color: \"#212529\"}}>{this.state.post.likes.length}</b> likes</span> \n                        &nbsp;|&nbsp;\n                        <span><b style={{color: \"#212529\"}}>{this.state.post.dislikes.length}</b> dislikes</span>\n                        &nbsp;|&nbsp;\n                        <span><b style={{color: \"#212529\"}}>{this.state.comments.length}</b> comments</span>\n                        &nbsp;|&nbsp;\n                        <span><b style={{color: \"#212529\"}}>{this.state.post.reposts_count}</b> reposts</span>\n                    </p>\n                    <hr className=\"mt-3 mb-3\"/>\n                    <div className='d-flex justify-content-around' style={{color: \"#5b7083\"}}>\n                        <p>\n                            <span name=\"like\" onClick={this.btnClick} className=\"post-icon like-post\">\n                                {this.state.liked ? <FontAwesomeIcon style={{color:\"#17bf63\"}}icon={ likeSol } size=\"lg\"/> : <FontAwesomeIcon icon={ likeReg } size=\"lg\"/>}\n                            </span>\n                        </p>\n                        <p>\n                            <span name=\"dislike\" onClick={this.btnClick} className=\"post-icon dislike-post\">\n                                {this.state.disliked ? <FontAwesomeIcon style={{color:\"#e0245e\"}} icon={ dislikeSol} size=\"lg\"/> : <FontAwesomeIcon icon={ dislikeReg} size=\"lg\"/>}\n                                \n                            </span>\n                        </p>\n                        <p onClick={this.commentClick}><span className=\"post-icon repost-post\"><FontAwesomeIcon icon={this.state.commenting ? commentSol : commentReg} size=\"lg\"/></span></p>\n                        <p> <NavLink style={{textDecoration: \"none\", color: \"inherit\"}} to={\"/repost/\"+this.state.post.id}> <span className=\"post-icon repost-post\"><FontAwesomeIcon icon={faReply} size=\"lg\"/></span></NavLink></p>\n                    </div>\n                </div>\n            </article>\n            {this.state.commenting && <AddComment focus={this.state.commenting} post={this.state.post} getComments={this.getComments}/>}\n            </div>\n        let comments = this.state.loading_comments ? <Loader /> : <CommentsList comments={this.state.comments} post={this.state.post} ></CommentsList>\n        return(\n        <Fragment>\n            <div className=\"container\">\n                <div className=\"row justify-content-center\">\n                    <div className=\"col-md-10 col-lg-7\">\n                        <h5 className=\"header\">Post</h5>\n                        {post}\n                        {comments}\n                    </div>\n                </div>\n            </div>\n        </Fragment>\n    )\n  }\n}\n\nexport default Post"]},"metadata":{},"sourceType":"module"}